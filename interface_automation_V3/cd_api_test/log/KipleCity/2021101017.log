2021-10-10 17:47:41,667 api_test.py[line:162]INFO - ########start to run API automation#######
2021-10-10 17:47:41,667 api_test.py[line:163]INFO - *****runAllCase
2021-10-10 17:47:41,667 api_test.py[line:85]INFO - *****deleteResultByProject
2021-10-10 17:47:41,676 api_test.py[line:26]INFO - *****loadAllCaseByProject
2021-10-10 17:47:41,698 api_test.py[line:29]INFO - loadAllCaseByProject sql is:select * from `KipleCity_testcases` where project='KipleCity' and run='yes'
2021-10-10 17:47:41,699 api_test.py[line:31]INFO - loadAllCaseByProject is:[{'id': 1, 'project': 'KipleCity', 'module': 'Login', 'title': 'login', 'method': 'post', 'url': '/admin/sessionv2', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$"}', 'pre_case_id': -1, 'pre_fields': '[]', 'request_body': '{"identifier":"$config_user$","challenge":"$config_password$"}', 'expect_result': 'true', 'assert_type': 'code', 'pass': '', 'msg': '', 'update_time': None, 'response': '', 'qa': None}, {'id': 2, 'project': 'KipleCity', 'module': 'Car', 'title': 'add car', 'method': 'post', 'url': '/lpr/add', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$","authorization":"Bearer $session_token$"}', 'pre_case_id': 1, 'pre_fields': '[{"field":"session_token","scope":"header"}]', 'request_body': '{\r\n    "email":"xmyp1umd@linshiyouxiang.net",\r\n    "password":"Test1234@"\r\n}', 'expect_result': 'true', 'assert_type': 'code', 'pass': '', 'msg': '', 'update_time': None, 'response': '', 'qa': 'Doris'}]
2021-10-10 17:47:41,699 api_test.py[line:135]INFO - *****runCaseUpdateDB
2021-10-10 17:47:41,699 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:47:41,699 api_test.py[line:191]INFO - #####start to run case id: 1
2021-10-10 17:47:41,701 api_test.py[line:152]INFO - 用例id=1,标题:login,执行报错:'NoneType' object is not subscriptable
2021-10-10 17:47:41,701 api_test.py[line:70]INFO - *****updateResultByCaseId
2021-10-10 17:47:41,703 api_test.py[line:76]INFO - update `KipleCity_testcases` set response="", pass='Fail', msg='NoneType object is not subscriptable', update_time='2021-10-10 17:47:41' where id=1
2021-10-10 17:47:41,705 api_test.py[line:154]INFO - 更新结果 rows=1
2021-10-10 17:47:41,705 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:47:41,705 api_test.py[line:191]INFO - #####start to run case id: 2
2021-10-10 17:47:41,731 api_test.py[line:219]INFO - headers:$config_x-application-key$will be replaced to 5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX
2021-10-10 17:47:41,731 api_test.py[line:224]INFO - 有前置条件
2021-10-10 17:47:41,731 api_test.py[line:40]INFO - *****findCaseById
2021-10-10 17:47:41,747 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:47:41,747 api_test.py[line:191]INFO - #####start to run case id: 1
2021-10-10 17:47:41,749 api_test.py[line:152]INFO - 用例id=2,标题:add car,执行报错:'NoneType' object is not subscriptable
2021-10-10 17:47:41,749 api_test.py[line:70]INFO - *****updateResultByCaseId
2021-10-10 17:47:41,750 api_test.py[line:76]INFO - update `KipleCity_testcases` set response="", pass='Fail', msg='NoneType object is not subscriptable', update_time='2021-10-10 17:47:41' where id=2
2021-10-10 17:47:41,753 api_test.py[line:154]INFO - 更新结果 rows=1
2021-10-10 17:47:41,753 api_test.py[line:116]INFO - *****checkFailCase
2021-10-10 17:47:41,778 api_test.py[line:177]INFO - ########rerun fail test cases#######
2021-10-10 17:47:41,778 api_test.py[line:135]INFO - *****runCaseUpdateDB
2021-10-10 17:47:41,778 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:47:41,778 api_test.py[line:191]INFO - #####start to run case id: 1
2021-10-10 17:47:41,792 api_test.py[line:152]INFO - 用例id=1,标题:login,执行报错:'NoneType' object is not subscriptable
2021-10-10 17:47:41,792 api_test.py[line:70]INFO - *****updateResultByCaseId
2021-10-10 17:47:41,794 api_test.py[line:76]INFO - update `KipleCity_testcases` set response="", pass='Fail', msg='NoneType object is not subscriptable', update_time='2021-10-10 17:47:41' where id=1
2021-10-10 17:47:41,794 api_test.py[line:154]INFO - 更新结果 rows=0
2021-10-10 17:47:41,794 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:47:41,794 api_test.py[line:191]INFO - #####start to run case id: 2
2021-10-10 17:47:41,796 api_test.py[line:219]INFO - headers:$config_x-application-key$will be replaced to 5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX
2021-10-10 17:47:41,796 api_test.py[line:224]INFO - 有前置条件
2021-10-10 17:47:41,796 api_test.py[line:40]INFO - *****findCaseById
2021-10-10 17:47:41,798 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:47:41,798 api_test.py[line:191]INFO - #####start to run case id: 1
2021-10-10 17:47:41,800 api_test.py[line:152]INFO - 用例id=2,标题:add car,执行报错:'NoneType' object is not subscriptable
2021-10-10 17:47:41,800 api_test.py[line:70]INFO - *****updateResultByCaseId
2021-10-10 17:47:41,802 api_test.py[line:76]INFO - update `KipleCity_testcases` set response="", pass='Fail', msg='NoneType object is not subscriptable', update_time='2021-10-10 17:47:41' where id=2
2021-10-10 17:47:41,802 api_test.py[line:154]INFO - 更新结果 rows=0
2021-10-10 17:47:41,803 api_test.py[line:370]INFO - *****sendTestReport
2021-10-10 17:47:41,829 api_test.py[line:319]INFO - *****loadHtmlPre
2021-10-10 17:47:41,830 api_test.py[line:341]INFO - *****getResultData
2021-10-10 17:47:41,830 api_test.py[line:26]INFO - *****loadAllCaseByProject
2021-10-10 17:47:41,831 api_test.py[line:29]INFO - loadAllCaseByProject sql is:select * from `KipleCity_testcases` where project='KipleCity' and run='yes'
2021-10-10 17:47:41,832 api_test.py[line:31]INFO - loadAllCaseByProject is:[{'id': 1, 'project': 'KipleCity', 'module': 'Login', 'title': 'login', 'method': 'post', 'url': '/admin/sessionv2', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$"}', 'pre_case_id': -1, 'pre_fields': '[]', 'request_body': '{"identifier":"$config_user$","challenge":"$config_password$"}', 'expect_result': 'true', 'assert_type': 'code', 'pass': 'Fail', 'msg': 'NoneType object is not subscriptable', 'update_time': '2021-10-10 17:47:41', 'response': '', 'qa': None}, {'id': 2, 'project': 'KipleCity', 'module': 'Car', 'title': 'add car', 'method': 'post', 'url': '/lpr/add', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$","authorization":"Bearer $session_token$"}', 'pre_case_id': 1, 'pre_fields': '[{"field":"session_token","scope":"header"}]', 'request_body': '{\r\n    "email":"xmyp1umd@linshiyouxiang.net",\r\n    "password":"Test1234@"\r\n}', 'expect_result': 'true', 'assert_type': 'code', 'pass': 'Fail', 'msg': 'NoneType object is not subscriptable', 'update_time': '2021-10-10 17:47:41', 'response': '', 'qa': 'Doris'}]
2021-10-10 17:47:41,832 api_test.py[line:99]INFO - *****caseRunSummary
2021-10-10 17:47:41,856 api_test.py[line:26]INFO - *****loadAllCaseByProject
2021-10-10 17:47:41,872 api_test.py[line:29]INFO - loadAllCaseByProject sql is:select * from `KipleCity_testcases` where project='KipleCity' and run='yes'
2021-10-10 17:47:41,873 api_test.py[line:31]INFO - loadAllCaseByProject is:[{'id': 1, 'project': 'KipleCity', 'module': 'Login', 'title': 'login', 'method': 'post', 'url': '/admin/sessionv2', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$"}', 'pre_case_id': -1, 'pre_fields': '[]', 'request_body': '{"identifier":"$config_user$","challenge":"$config_password$"}', 'expect_result': 'true', 'assert_type': 'code', 'pass': 'Fail', 'msg': 'NoneType object is not subscriptable', 'update_time': '2021-10-10 17:47:41', 'response': '', 'qa': None}, {'id': 2, 'project': 'KipleCity', 'module': 'Car', 'title': 'add car', 'method': 'post', 'url': '/lpr/add', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$","authorization":"Bearer $session_token$"}', 'pre_case_id': 1, 'pre_fields': '[{"field":"session_token","scope":"header"}]', 'request_body': '{\r\n    "email":"xmyp1umd@linshiyouxiang.net",\r\n    "password":"Test1234@"\r\n}', 'expect_result': 'true', 'assert_type': 'code', 'pass': 'Fail', 'msg': 'NoneType object is not subscriptable', 'update_time': '2021-10-10 17:47:41', 'response': '', 'qa': 'Doris'}]
2021-10-10 17:47:41,873 api_test.py[line:329]INFO - *****loadHtmlEnd
2021-10-10 17:47:41,875 send_mail.py[line:16]INFO - title = KipleCity API automation test report report = ../report/KipleCity/test_report_2021-10-10_17_47_41.html mail_host = smtp.qq.com mail_sender = brsbyjw@qq.com mail_receivers = ['1226682240@qq.com'] mail_password = luesrdnzkwxrbdbh
2021-10-10 17:47:42,998 send_mail.py[line:45]INFO - email was sent successfully!
2021-10-10 17:47:43,044 api_test.py[line:181]INFO - ########complete to run API automation#######
2021-10-10 17:49:56,916 api_test.py[line:162]INFO - ########start to run API automation#######
2021-10-10 17:49:56,916 api_test.py[line:163]INFO - *****runAllCase
2021-10-10 17:49:56,916 api_test.py[line:85]INFO - *****deleteResultByProject
2021-10-10 17:49:56,946 api_test.py[line:26]INFO - *****loadAllCaseByProject
2021-10-10 17:49:56,947 api_test.py[line:29]INFO - loadAllCaseByProject sql is:select * from `KipleCity_testcases` where project='KipleCity' and run='yes'
2021-10-10 17:49:56,947 api_test.py[line:31]INFO - loadAllCaseByProject is:[{'id': 1, 'project': 'KipleCity', 'module': 'Login', 'title': 'login', 'method': 'post', 'url': '/admin/sessionv2', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$"}', 'pre_case_id': -1, 'pre_fields': '[]', 'request_body': '{"identifier":"$config_user$","challenge":"$config_password$"}', 'expect_result': 'true', 'assert_type': 'code', 'pass': '', 'msg': '', 'update_time': None, 'response': '', 'qa': None}, {'id': 2, 'project': 'KipleCity', 'module': 'Car', 'title': 'add car', 'method': 'post', 'url': '/lpr/add', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$","authorization":"Bearer $session_token$"}', 'pre_case_id': 1, 'pre_fields': '[{"field":"session_token","scope":"header"}]', 'request_body': '{"carPlateNumbers":[{"uuid":"f4dfdc7b-a68e-4d28-b1fb-52d26b8000ec","active_flag":true,"valid_type":0,"car_plate_no":"HJ898791","is_edit":true,"max_car_park_bay":1,"residence_uuid":"b5e27596-af09-4025-8164-38750e586481","unit_uuid":"94408056-736e-4dc3-bf98-f0deb9567197","is_from_portal":true}]}', 'expect_result': 'true', 'assert_type': 'code', 'pass': '', 'msg': '', 'update_time': None, 'response': '', 'qa': 'Doris'}]
2021-10-10 17:49:56,949 api_test.py[line:135]INFO - *****runCaseUpdateDB
2021-10-10 17:49:56,949 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:49:56,949 api_test.py[line:191]INFO - #####start to run case id: 1
2021-10-10 17:49:56,951 api_test.py[line:152]INFO - 用例id=1,标题:login,执行报错:'NoneType' object is not subscriptable
2021-10-10 17:49:56,951 api_test.py[line:70]INFO - *****updateResultByCaseId
2021-10-10 17:49:56,976 api_test.py[line:76]INFO - update `KipleCity_testcases` set response="", pass='Fail', msg='NoneType object is not subscriptable', update_time='2021-10-10 17:49:56' where id=1
2021-10-10 17:49:56,978 api_test.py[line:154]INFO - 更新结果 rows=1
2021-10-10 17:49:56,979 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:49:56,979 api_test.py[line:191]INFO - #####start to run case id: 2
2021-10-10 17:49:56,992 api_test.py[line:219]INFO - headers:$config_x-application-key$will be replaced to 5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX
2021-10-10 17:49:56,992 api_test.py[line:224]INFO - 有前置条件
2021-10-10 17:49:56,993 api_test.py[line:40]INFO - *****findCaseById
2021-10-10 17:49:56,995 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:49:56,995 api_test.py[line:191]INFO - #####start to run case id: 1
2021-10-10 17:49:56,997 api_test.py[line:152]INFO - 用例id=2,标题:add car,执行报错:'NoneType' object is not subscriptable
2021-10-10 17:49:56,997 api_test.py[line:70]INFO - *****updateResultByCaseId
2021-10-10 17:49:56,998 api_test.py[line:76]INFO - update `KipleCity_testcases` set response="", pass='Fail', msg='NoneType object is not subscriptable', update_time='2021-10-10 17:49:56' where id=2
2021-10-10 17:49:57,001 api_test.py[line:154]INFO - 更新结果 rows=1
2021-10-10 17:49:57,001 api_test.py[line:116]INFO - *****checkFailCase
2021-10-10 17:49:57,023 api_test.py[line:177]INFO - ########rerun fail test cases#######
2021-10-10 17:49:57,023 api_test.py[line:135]INFO - *****runCaseUpdateDB
2021-10-10 17:49:57,023 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:49:57,023 api_test.py[line:191]INFO - #####start to run case id: 1
2021-10-10 17:49:57,037 api_test.py[line:152]INFO - 用例id=1,标题:login,执行报错:'NoneType' object is not subscriptable
2021-10-10 17:49:57,037 api_test.py[line:70]INFO - *****updateResultByCaseId
2021-10-10 17:49:57,053 api_test.py[line:76]INFO - update `KipleCity_testcases` set response="", pass='Fail', msg='NoneType object is not subscriptable', update_time='2021-10-10 17:49:57' where id=1
2021-10-10 17:49:57,056 api_test.py[line:154]INFO - 更新结果 rows=1
2021-10-10 17:49:57,056 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:49:57,056 api_test.py[line:191]INFO - #####start to run case id: 2
2021-10-10 17:49:57,069 api_test.py[line:219]INFO - headers:$config_x-application-key$will be replaced to 5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX
2021-10-10 17:49:57,069 api_test.py[line:224]INFO - 有前置条件
2021-10-10 17:49:57,069 api_test.py[line:40]INFO - *****findCaseById
2021-10-10 17:49:57,086 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:49:57,086 api_test.py[line:191]INFO - #####start to run case id: 1
2021-10-10 17:49:57,087 api_test.py[line:152]INFO - 用例id=2,标题:add car,执行报错:'NoneType' object is not subscriptable
2021-10-10 17:49:57,088 api_test.py[line:70]INFO - *****updateResultByCaseId
2021-10-10 17:49:57,089 api_test.py[line:76]INFO - update `KipleCity_testcases` set response="", pass='Fail', msg='NoneType object is not subscriptable', update_time='2021-10-10 17:49:57' where id=2
2021-10-10 17:49:57,091 api_test.py[line:154]INFO - 更新结果 rows=1
2021-10-10 17:49:57,091 api_test.py[line:370]INFO - *****sendTestReport
2021-10-10 17:49:57,133 api_test.py[line:319]INFO - *****loadHtmlPre
2021-10-10 17:49:57,135 api_test.py[line:341]INFO - *****getResultData
2021-10-10 17:49:57,135 api_test.py[line:26]INFO - *****loadAllCaseByProject
2021-10-10 17:49:57,147 api_test.py[line:29]INFO - loadAllCaseByProject sql is:select * from `KipleCity_testcases` where project='KipleCity' and run='yes'
2021-10-10 17:49:57,148 api_test.py[line:31]INFO - loadAllCaseByProject is:[{'id': 1, 'project': 'KipleCity', 'module': 'Login', 'title': 'login', 'method': 'post', 'url': '/admin/sessionv2', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$"}', 'pre_case_id': -1, 'pre_fields': '[]', 'request_body': '{"identifier":"$config_user$","challenge":"$config_password$"}', 'expect_result': 'true', 'assert_type': 'code', 'pass': 'Fail', 'msg': 'NoneType object is not subscriptable', 'update_time': '2021-10-10 17:49:57', 'response': '', 'qa': None}, {'id': 2, 'project': 'KipleCity', 'module': 'Car', 'title': 'add car', 'method': 'post', 'url': '/lpr/add', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$","authorization":"Bearer $session_token$"}', 'pre_case_id': 1, 'pre_fields': '[{"field":"session_token","scope":"header"}]', 'request_body': '{"carPlateNumbers":[{"uuid":"f4dfdc7b-a68e-4d28-b1fb-52d26b8000ec","active_flag":true,"valid_type":0,"car_plate_no":"HJ898791","is_edit":true,"max_car_park_bay":1,"residence_uuid":"b5e27596-af09-4025-8164-38750e586481","unit_uuid":"94408056-736e-4dc3-bf98-f0deb9567197","is_from_portal":true}]}', 'expect_result': 'true', 'assert_type': 'code', 'pass': 'Fail', 'msg': 'NoneType object is not subscriptable', 'update_time': '2021-10-10 17:49:57', 'response': '', 'qa': 'Doris'}]
2021-10-10 17:49:57,148 api_test.py[line:99]INFO - *****caseRunSummary
2021-10-10 17:49:57,150 api_test.py[line:26]INFO - *****loadAllCaseByProject
2021-10-10 17:49:57,163 api_test.py[line:29]INFO - loadAllCaseByProject sql is:select * from `KipleCity_testcases` where project='KipleCity' and run='yes'
2021-10-10 17:49:57,164 api_test.py[line:31]INFO - loadAllCaseByProject is:[{'id': 1, 'project': 'KipleCity', 'module': 'Login', 'title': 'login', 'method': 'post', 'url': '/admin/sessionv2', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$"}', 'pre_case_id': -1, 'pre_fields': '[]', 'request_body': '{"identifier":"$config_user$","challenge":"$config_password$"}', 'expect_result': 'true', 'assert_type': 'code', 'pass': 'Fail', 'msg': 'NoneType object is not subscriptable', 'update_time': '2021-10-10 17:49:57', 'response': '', 'qa': None}, {'id': 2, 'project': 'KipleCity', 'module': 'Car', 'title': 'add car', 'method': 'post', 'url': '/lpr/add', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$","authorization":"Bearer $session_token$"}', 'pre_case_id': 1, 'pre_fields': '[{"field":"session_token","scope":"header"}]', 'request_body': '{"carPlateNumbers":[{"uuid":"f4dfdc7b-a68e-4d28-b1fb-52d26b8000ec","active_flag":true,"valid_type":0,"car_plate_no":"HJ898791","is_edit":true,"max_car_park_bay":1,"residence_uuid":"b5e27596-af09-4025-8164-38750e586481","unit_uuid":"94408056-736e-4dc3-bf98-f0deb9567197","is_from_portal":true}]}', 'expect_result': 'true', 'assert_type': 'code', 'pass': 'Fail', 'msg': 'NoneType object is not subscriptable', 'update_time': '2021-10-10 17:49:57', 'response': '', 'qa': 'Doris'}]
2021-10-10 17:49:57,164 api_test.py[line:329]INFO - *****loadHtmlEnd
2021-10-10 17:49:57,166 send_mail.py[line:16]INFO - title = KipleCity API automation test report report = ../report/KipleCity/test_report_2021-10-10_17_49_57.html mail_host = smtp.qq.com mail_sender = brsbyjw@qq.com mail_receivers = ['1226682240@qq.com'] mail_password = luesrdnzkwxrbdbh
2021-10-10 17:49:58,297 send_mail.py[line:45]INFO - email was sent successfully!
2021-10-10 17:49:58,352 api_test.py[line:181]INFO - ########complete to run API automation#######
2021-10-10 17:54:44,356 api_test.py[line:162]INFO - ########start to run API automation#######
2021-10-10 17:54:44,357 api_test.py[line:163]INFO - *****runAllCase
2021-10-10 17:54:44,357 api_test.py[line:85]INFO - *****deleteResultByProject
2021-10-10 17:54:44,380 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:{'id': 1, 'project': 'KipleCity', 'dict_key': 'host', 'dict_value': 'https://k8s-stg-api.kiplelive.com'}
2021-10-10 17:54:44,380 api_test.py[line:26]INFO - *****loadAllCaseByProject
2021-10-10 17:54:44,395 api_test.py[line:29]INFO - loadAllCaseByProject sql is:select * from `KipleCity_testcases` where project='KipleCity' and run='yes'
2021-10-10 17:54:44,396 api_test.py[line:31]INFO - loadAllCaseByProject is:[{'id': 1, 'project': 'KipleCity', 'module': 'Login', 'title': 'login', 'method': 'post', 'url': '/admin/sessionv2', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$"}', 'pre_case_id': -1, 'pre_fields': '[]', 'request_body': '{"identifier":"$config_user$","challenge":"$config_password$"}', 'expect_result': 'true', 'assert_type': 'code', 'pass': '', 'msg': '', 'update_time': None, 'response': '', 'qa': None}, {'id': 2, 'project': 'KipleCity', 'module': 'Car', 'title': 'add car', 'method': 'post', 'url': '/lpr/add', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$","authorization":"Bearer $session_token$"}', 'pre_case_id': 1, 'pre_fields': '[{"field":"session_token","scope":"header"}]', 'request_body': '{"carPlateNumbers":[{"uuid":"f4dfdc7b-a68e-4d28-b1fb-52d26b8000ec","active_flag":true,"valid_type":0,"car_plate_no":"HJ898791","is_edit":true,"max_car_park_bay":1,"residence_uuid":"b5e27596-af09-4025-8164-38750e586481","unit_uuid":"94408056-736e-4dc3-bf98-f0deb9567197","is_from_portal":true}]}', 'expect_result': 'true', 'assert_type': 'code', 'pass': '', 'msg': '', 'update_time': None, 'response': '', 'qa': 'Doris'}]
2021-10-10 17:54:44,396 api_test.py[line:135]INFO - *****runCaseUpdateDB
2021-10-10 17:54:44,396 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:54:44,396 api_test.py[line:191]INFO - #####start to run case id: 1
2021-10-10 17:54:44,409 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:None
2021-10-10 17:54:44,409 api_test.py[line:152]INFO - 用例id=1,标题:login,执行报错:'NoneType' object is not subscriptable
2021-10-10 17:54:44,409 api_test.py[line:70]INFO - *****updateResultByCaseId
2021-10-10 17:54:44,425 api_test.py[line:76]INFO - update `KipleCity_testcases` set response="", pass='Fail', msg='NoneType object is not subscriptable', update_time='2021-10-10 17:54:44' where id=1
2021-10-10 17:54:44,428 api_test.py[line:154]INFO - 更新结果 rows=1
2021-10-10 17:54:44,428 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:54:44,428 api_test.py[line:191]INFO - #####start to run case id: 2
2021-10-10 17:54:44,430 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:{'id': 6, 'project': 'KipleCity', 'dict_key': 'x-application-key', 'dict_value': '5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX'}
2021-10-10 17:54:44,430 api_test.py[line:219]INFO - headers:$config_x-application-key$will be replaced to 5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX
2021-10-10 17:54:44,430 api_test.py[line:224]INFO - 有前置条件
2021-10-10 17:54:44,430 api_test.py[line:40]INFO - *****findCaseById
2021-10-10 17:54:44,455 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:54:44,455 api_test.py[line:191]INFO - #####start to run case id: 1
2021-10-10 17:54:44,457 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:None
2021-10-10 17:54:44,457 api_test.py[line:152]INFO - 用例id=2,标题:add car,执行报错:'NoneType' object is not subscriptable
2021-10-10 17:54:44,457 api_test.py[line:70]INFO - *****updateResultByCaseId
2021-10-10 17:54:44,459 api_test.py[line:76]INFO - update `KipleCity_testcases` set response="", pass='Fail', msg='NoneType object is not subscriptable', update_time='2021-10-10 17:54:44' where id=2
2021-10-10 17:54:44,461 api_test.py[line:154]INFO - 更新结果 rows=1
2021-10-10 17:54:44,461 api_test.py[line:116]INFO - *****checkFailCase
2021-10-10 17:54:44,464 api_test.py[line:177]INFO - ########rerun fail test cases#######
2021-10-10 17:54:44,464 api_test.py[line:135]INFO - *****runCaseUpdateDB
2021-10-10 17:54:44,464 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:54:44,464 api_test.py[line:191]INFO - #####start to run case id: 1
2021-10-10 17:54:44,466 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:None
2021-10-10 17:54:44,466 api_test.py[line:152]INFO - 用例id=1,标题:login,执行报错:'NoneType' object is not subscriptable
2021-10-10 17:54:44,466 api_test.py[line:70]INFO - *****updateResultByCaseId
2021-10-10 17:54:44,486 api_test.py[line:76]INFO - update `KipleCity_testcases` set response="", pass='Fail', msg='NoneType object is not subscriptable', update_time='2021-10-10 17:54:44' where id=1
2021-10-10 17:54:44,486 api_test.py[line:154]INFO - 更新结果 rows=0
2021-10-10 17:54:44,487 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:54:44,487 api_test.py[line:191]INFO - #####start to run case id: 2
2021-10-10 17:54:44,488 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:{'id': 6, 'project': 'KipleCity', 'dict_key': 'x-application-key', 'dict_value': '5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX'}
2021-10-10 17:54:44,488 api_test.py[line:219]INFO - headers:$config_x-application-key$will be replaced to 5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX
2021-10-10 17:54:44,489 api_test.py[line:224]INFO - 有前置条件
2021-10-10 17:54:44,489 api_test.py[line:40]INFO - *****findCaseById
2021-10-10 17:54:44,490 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:54:44,491 api_test.py[line:191]INFO - #####start to run case id: 1
2021-10-10 17:54:44,492 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:None
2021-10-10 17:54:44,492 api_test.py[line:152]INFO - 用例id=2,标题:add car,执行报错:'NoneType' object is not subscriptable
2021-10-10 17:54:44,492 api_test.py[line:70]INFO - *****updateResultByCaseId
2021-10-10 17:54:44,516 api_test.py[line:76]INFO - update `KipleCity_testcases` set response="", pass='Fail', msg='NoneType object is not subscriptable', update_time='2021-10-10 17:54:44' where id=2
2021-10-10 17:54:44,516 api_test.py[line:154]INFO - 更新结果 rows=0
2021-10-10 17:54:44,517 api_test.py[line:370]INFO - *****sendTestReport
2021-10-10 17:54:44,518 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:{'id': 2, 'project': 'KipleCity', 'dict_key': 'mail_host', 'dict_value': 'smtp.qq.com'}
2021-10-10 17:54:44,520 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:{'id': 3, 'project': 'KipleCity', 'dict_key': 'mail_sender', 'dict_value': 'brsbyjw@qq.com'}
2021-10-10 17:54:44,522 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:{'id': 5, 'project': 'KipleCity', 'dict_key': 'mail_password', 'dict_value': 'luesrdnzkwxrbdbh'}
2021-10-10 17:54:44,524 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:{'id': 4, 'project': 'KipleCity', 'dict_key': 'mail_receivers', 'dict_value': '1226682240@qq.com'}
2021-10-10 17:54:44,524 api_test.py[line:319]INFO - *****loadHtmlPre
2021-10-10 17:54:44,525 api_test.py[line:341]INFO - *****getResultData
2021-10-10 17:54:44,525 api_test.py[line:26]INFO - *****loadAllCaseByProject
2021-10-10 17:54:44,547 api_test.py[line:29]INFO - loadAllCaseByProject sql is:select * from `KipleCity_testcases` where project='KipleCity' and run='yes'
2021-10-10 17:54:44,547 api_test.py[line:31]INFO - loadAllCaseByProject is:[{'id': 1, 'project': 'KipleCity', 'module': 'Login', 'title': 'login', 'method': 'post', 'url': '/admin/sessionv2', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$"}', 'pre_case_id': -1, 'pre_fields': '[]', 'request_body': '{"identifier":"$config_user$","challenge":"$config_password$"}', 'expect_result': 'true', 'assert_type': 'code', 'pass': 'Fail', 'msg': 'NoneType object is not subscriptable', 'update_time': '2021-10-10 17:54:44', 'response': '', 'qa': None}, {'id': 2, 'project': 'KipleCity', 'module': 'Car', 'title': 'add car', 'method': 'post', 'url': '/lpr/add', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$","authorization":"Bearer $session_token$"}', 'pre_case_id': 1, 'pre_fields': '[{"field":"session_token","scope":"header"}]', 'request_body': '{"carPlateNumbers":[{"uuid":"f4dfdc7b-a68e-4d28-b1fb-52d26b8000ec","active_flag":true,"valid_type":0,"car_plate_no":"HJ898791","is_edit":true,"max_car_park_bay":1,"residence_uuid":"b5e27596-af09-4025-8164-38750e586481","unit_uuid":"94408056-736e-4dc3-bf98-f0deb9567197","is_from_portal":true}]}', 'expect_result': 'true', 'assert_type': 'code', 'pass': 'Fail', 'msg': 'NoneType object is not subscriptable', 'update_time': '2021-10-10 17:54:44', 'response': '', 'qa': 'Doris'}]
2021-10-10 17:54:44,548 api_test.py[line:99]INFO - *****caseRunSummary
2021-10-10 17:54:44,550 api_test.py[line:26]INFO - *****loadAllCaseByProject
2021-10-10 17:54:44,551 api_test.py[line:29]INFO - loadAllCaseByProject sql is:select * from `KipleCity_testcases` where project='KipleCity' and run='yes'
2021-10-10 17:54:44,551 api_test.py[line:31]INFO - loadAllCaseByProject is:[{'id': 1, 'project': 'KipleCity', 'module': 'Login', 'title': 'login', 'method': 'post', 'url': '/admin/sessionv2', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$"}', 'pre_case_id': -1, 'pre_fields': '[]', 'request_body': '{"identifier":"$config_user$","challenge":"$config_password$"}', 'expect_result': 'true', 'assert_type': 'code', 'pass': 'Fail', 'msg': 'NoneType object is not subscriptable', 'update_time': '2021-10-10 17:54:44', 'response': '', 'qa': None}, {'id': 2, 'project': 'KipleCity', 'module': 'Car', 'title': 'add car', 'method': 'post', 'url': '/lpr/add', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$","authorization":"Bearer $session_token$"}', 'pre_case_id': 1, 'pre_fields': '[{"field":"session_token","scope":"header"}]', 'request_body': '{"carPlateNumbers":[{"uuid":"f4dfdc7b-a68e-4d28-b1fb-52d26b8000ec","active_flag":true,"valid_type":0,"car_plate_no":"HJ898791","is_edit":true,"max_car_park_bay":1,"residence_uuid":"b5e27596-af09-4025-8164-38750e586481","unit_uuid":"94408056-736e-4dc3-bf98-f0deb9567197","is_from_portal":true}]}', 'expect_result': 'true', 'assert_type': 'code', 'pass': 'Fail', 'msg': 'NoneType object is not subscriptable', 'update_time': '2021-10-10 17:54:44', 'response': '', 'qa': 'Doris'}]
2021-10-10 17:54:44,552 api_test.py[line:329]INFO - *****loadHtmlEnd
2021-10-10 17:54:44,553 send_mail.py[line:16]INFO - title = KipleCity API automation test report report = ../report/KipleCity/test_report_2021-10-10_17_54_44.html mail_host = smtp.qq.com mail_sender = brsbyjw@qq.com mail_receivers = ['1226682240@qq.com'] mail_password = luesrdnzkwxrbdbh
2021-10-10 17:54:45,776 send_mail.py[line:45]INFO - email was sent successfully!
2021-10-10 17:54:45,822 api_test.py[line:181]INFO - ########complete to run API automation#######
2021-10-10 17:59:38,600 api_test.py[line:162]INFO - ########start to run API automation#######
2021-10-10 17:59:38,600 api_test.py[line:163]INFO - *****runAllCase
2021-10-10 17:59:38,600 api_test.py[line:85]INFO - *****deleteResultByProject
2021-10-10 17:59:38,627 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:{'id': 1, 'project': 'KipleCity', 'dict_key': 'host', 'dict_value': 'https://k8s-stg-api.kiplelive.com'}
2021-10-10 17:59:38,627 api_test.py[line:26]INFO - *****loadAllCaseByProject
2021-10-10 17:59:38,642 api_test.py[line:29]INFO - loadAllCaseByProject sql is:select * from `KipleCity_testcases` where project='KipleCity' and run='yes'
2021-10-10 17:59:38,643 api_test.py[line:31]INFO - loadAllCaseByProject is:[{'id': 1, 'project': 'KipleCity', 'module': 'Login', 'title': 'login', 'method': 'post', 'url': '/admin/sessionv2', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$"}', 'pre_case_id': -1, 'pre_fields': '[]', 'request_body': '{"identifier":"demo@dhome.io","challenge":"w3aredeVTEam2019~~~"}', 'expect_result': 'true', 'assert_type': 'code', 'pass': '', 'msg': '', 'update_time': None, 'response': '', 'qa': None}, {'id': 2, 'project': 'KipleCity', 'module': 'Car', 'title': 'add car', 'method': 'post', 'url': '/lpr/add', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$","authorization":"Bearer $session_token$"}', 'pre_case_id': 1, 'pre_fields': '[{"field":"session_token","scope":"header"}]', 'request_body': '{"carPlateNumbers":[{"uuid":"f4dfdc7b-a68e-4d28-b1fb-52d26b8000ec","active_flag":true,"valid_type":0,"car_plate_no":"HJ898791","is_edit":true,"max_car_park_bay":1,"residence_uuid":"b5e27596-af09-4025-8164-38750e586481","unit_uuid":"94408056-736e-4dc3-bf98-f0deb9567197","is_from_portal":true}]}', 'expect_result': 'true', 'assert_type': 'code', 'pass': '', 'msg': '', 'update_time': None, 'response': '', 'qa': 'Doris'}]
2021-10-10 17:59:38,643 api_test.py[line:135]INFO - *****runCaseUpdateDB
2021-10-10 17:59:38,643 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:59:38,643 api_test.py[line:191]INFO - #####start to run case id: 1
2021-10-10 17:59:38,659 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:{'id': 6, 'project': 'KipleCity', 'dict_key': 'x-application-key', 'dict_value': '5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX'}
2021-10-10 17:59:38,660 api_test.py[line:219]INFO - headers:$config_x-application-key$will be replaced to 5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX
2021-10-10 17:59:38,660 api_test.py[line:255]INFO - case id = 1
req_url = https://k8s-stg-api.kiplelive.com/admin/sessionv2
 method = post
 header = {'x-application-key': '5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX'}
 param ={'identifier': 'demo@dhome.io', 'challenge': 'w3aredeVTEam2019~~~'}
2021-10-10 17:59:38,660 request_util.py[line:16]INFO - 请求: url=https://k8s-stg-api.kiplelive.com/admin/sessionv2
method=post
headers={'x-application-key': '5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX'}
param={'identifier': 'demo@dhome.io', 'challenge': 'w3aredeVTEam2019~~~'}
content_type=application/json
2021-10-10 17:59:39,452 api_test.py[line:262]INFO - response = ↓
2021-10-10 17:59:39,453 api_test.py[line:263]INFO - {'success': True, 'session_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1dWlkIjoiMTNjMzJlZTEtZjIyZS00ZGQ5LTgxN2ItNjk3M2YzMTFhNGIzIiwibmFtZSI6IkRlc21vbmQgVW5kZXJ3b29kIiwiZW1haWwiOiJkZW1vQGRob21lLmlvIiwib2ZmaWNlX2VtYWlsIjpudWxsLCJwaG9uZV9jb3VudHJ5X2NvZGUiOiI2MCIsInBob25lIjoiNjAxMjAwMDExMTEiLCJhbHRfY291bnRyeV9jb2RlIjpudWxsLCJvZmZpY2VfcGhvbmUiOm51bGwsInBob3RvX3VybCI6Imh0dHBzOi8vczMtYXAtc291dGhlYXN0LTEuYW1hem9uYXdzLmNvbS9mbGlwYm94c2VjdXJlLWRob21lL3Byb2ZpbGVzL3Byb2ZpbGVfMTNjMzJlZTEtZjIyZS00ZGQ5LTgxN2ItNjk3M2YzMTFhNGIzXzEzM2FjMWM4MGNkMzRjOWJiMDUxZWRmODg1NGEwZTZkLmpwZyIsImNyZWF0ZWRfYXQiOiIyMDE3LTA2LTE5IDEzOjU4OjAzIiwidXBkYXRlZF9hdCI6IjIwMTgtMDktMDYgMDg6MjI6NTciLCJwaG90byI6ImMyYWE3N2JjLTM2MTctNDZmMi04NWVhLWI1Y2Y2YmJjYTYwNyIsImRlbGV0ZWRfYXQiOm51bGwsImZpcnN0X2xvZ2luX2F0IjoiMjAxOC0wOC0wMyAxNzo0NzowMSIsIm9sZF9waG9uZSI6bnVsbCwiaXNfZ3JvdXBfYWRtaW4iOmZhbHNlLCJpc19kZW1vX2FjY291bnQiOmZhbHNlLCJxcl9jb2RlIjpudWxsLCJxcmNvZGVfZXhwaXJlZF9hdCI6bnVsbCwicXJjb2RlX3VwZGF0ZWRfYXQiOm51bGwsInVzZXJfcHJvZmlsZV9pZCI6NTA3LCJzaG91bGRfbWlncmF0ZSI6IjAwMCIsInVtc190b2tlbl9zdGF0dXMiOiIwMDAiLCJtaWdyYXRpb25fc3RhdHVzIjoiMDAwIiwibWlncmF0ZWRfcGhvbmUiOm51bGwsImtiX3Rva2VuIjpudWxsLCJrYl9yZWZyZXNoX3Rva2VuIjpudWxsLCJrYnRva2VuX2V4cGlyZWRfYXRfbG9jYWx0aW1lIjpudWxsLCJpZGVudGl0aWVzIjpbeyJ1dWlkIjoiMGYzYzQyMDUtZGZmYS00ZjU1LTkzZDUtYzk4NWViYWFjNGEyIiwidHlwZSI6InVzZXJwYXNzIiwicHJvdmlkZXIiOiJhY2NvdW50cy5kaG9tZS5pbyIsInZlcmlmaWVkIjp0cnVlLCJpc19zZWxmX3JlZ2lzdGVyIjpmYWxzZSwiaWRlbnRpZmllciI6ImRlditkaG9tZTEzQGFwcGxhYi5teSIsIm9mZmljZV9pZGVudGlmaWVyIjpudWxsLCJyZXNldF9jb2RlIjpudWxsLCJhY3RpdmF0aW9uX2NvZGUiOiI3NTk1ZGFlOWNkZTgyMjE4MzM2YTU0NTdlZDlkNTVlYzg5OGM1MTYyM2Y3M2E2OWVlZmFhNTdhMmNjOTE5NGZjIiwiaXNfYWN0aXZhdGVkIjpmYWxzZSwiY3JlYXRlZF9hdCI6IjIwMTktMDItMTkgMDI6NTM6MDciLCJ1cGRhdGVkX2F0IjpudWxsLCJwaG9uZSI6bnVsbCwiZGVsZXRlZF9hdCI6bnVsbCwidXNlcl90eXBlIjoibmV3Iiwib2xkX3Bob25lIjpudWxsfSx7InV1aWQiOiI3ZmI1Y2IzNi1hNmExLTExZTgtOThkMC01MjkyNjlmYjE0NTkiLCJ0eXBlIjoidXNlcnBhc3MiLCJwcm92aWRlciI6ImFjY291bnRzLmRob21lLmlvIiwidmVyaWZpZWQiOnRydWUsImlzX3NlbGZfcmVnaXN0ZXIiOmZhbHNlLCJpZGVudGlmaWVyIjoiZGVtb0BkaG9tZS5pbyIsIm9mZmljZV9pZGVudGlmaWVyIjpudWxsLCJyZXNldF9jb2RlIjpudWxsLCJhY3RpdmF0aW9uX2NvZGUiOm51bGwsImlzX2FjdGl2YXRlZCI6dHJ1ZSwiY3JlYXRlZF9hdCI6IjIwMTgtMDgtMjMgMDY6NTY6NDUiLCJ1cGRhdGVkX2F0IjpudWxsLCJwaG9uZSI6bnVsbCwiZGVsZXRlZF9hdCI6bnVsbCwidXNlcl90eXBlIjoib2xkIiwib2xkX3Bob25lIjpudWxsfV0sInJvbGVzIjpbeyJ0eXBlIjoic3VwZXJhZG1pbiIsInJlc2lkZW5jZV91dWlkIjoiOTMwMjA3YjAtYmYxMC00MGJmLWE5ZTItMGIyOGJmZWNiZTFjIiwiY2FuX21hbmFnZV9yZXNpZGVuY2UiOm51bGx9XSwiaWF0IjoxNjMzODU5OTc5LCJpc3MiOiJhY2NvdW50cy5kaG9tZS5pbyJ9.u6sUwuZQwgXXTZNPnxx1t8SjSEPgqhmZi3ADx7xcd4E', 'profile': {'uuid': '13c32ee1-f22e-4dd9-817b-6973f311a4b3', 'name': 'Desmond Underwood', 'email': 'demo@dhome.io', 'office_email': None, 'phone_country_code': '60', 'phone': '60120001111', 'alt_country_code': None, 'office_phone': None, 'photo_url': 'https://s3-ap-southeast-1.amazonaws.com/flipboxsecure-dhome/profiles/profile_13c32ee1-f22e-4dd9-817b-6973f311a4b3_133ac1c80cd34c9bb051edf8854a0e6d.jpg', 'created_at': '2017-06-19 13:58:03', 'updated_at': '2018-09-06 08:22:57', 'photo': 'c2aa77bc-3617-46f2-85ea-b5cf6bbca607', 'deleted_at': None, 'first_login_at': '2018-08-03 17:47:01', 'old_phone': None, 'is_group_admin': False, 'is_demo_account': False, 'qr_code': None, 'qrcode_expired_at': None, 'qrcode_updated_at': None, 'user_profile_id': 507, 'should_migrate': '000', 'ums_token_status': '000', 'migration_status': '000', 'migrated_phone': None, 'kb_token': None, 'kb_refresh_token': None, 'kbtoken_expired_at_localtime': None, 'roles': [{'type': 'superadmin', 'residence_uuid': '930207b0-bf10-40bf-a9e2-0b28bfecbe1c', 'can_manage_residence': None}]}, 'identities': [{'uuid': '0f3c4205-dffa-4f55-93d5-c985ebaac4a2', 'type': 'userpass', 'provider': 'accounts.dhome.io', 'verified': True, 'is_self_register': False, 'identifier': 'dev+dhome13@applab.my', 'office_identifier': None, 'reset_code': None, 'activation_code': '7595dae9cde82218336a5457ed9d55ec898c51623f73a69eefaa57a2cc9194fc', 'is_activated': False, 'created_at': '2019-02-19 02:53:07', 'updated_at': None, 'phone': None, 'deleted_at': None, 'user_type': 'new', 'old_phone': None}, {'uuid': '7fb5cb36-a6a1-11e8-98d0-529269fb1459', 'type': 'userpass', 'provider': 'accounts.dhome.io', 'verified': True, 'is_self_register': False, 'identifier': 'demo@dhome.io', 'office_identifier': None, 'reset_code': None, 'activation_code': None, 'is_activated': True, 'created_at': '2018-08-23 06:56:45', 'updated_at': None, 'phone': None, 'deleted_at': None, 'user_type': 'old', 'old_phone': None}]}
2021-10-10 17:59:39,460 api_test.py[line:264]INFO - #####end to run case id: 1
2021-10-10 17:59:39,460 api_test.py[line:274]INFO - *****assertResponse
2021-10-10 17:59:39,460 api_test.py[line:288]INFO - 测试用例不通过
2021-10-10 17:59:39,460 api_test.py[line:152]INFO - 用例id=1,标题:login,执行报错:'msg'
2021-10-10 17:59:39,461 api_test.py[line:70]INFO - *****updateResultByCaseId
2021-10-10 17:59:39,477 api_test.py[line:76]INFO - update `KipleCity_testcases` set response="", pass='Fail', msg='msg', update_time='2021-10-10 17:59:39' where id=1
2021-10-10 17:59:39,480 api_test.py[line:154]INFO - 更新结果 rows=1
2021-10-10 17:59:39,480 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:59:39,480 api_test.py[line:191]INFO - #####start to run case id: 2
2021-10-10 17:59:39,494 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:{'id': 6, 'project': 'KipleCity', 'dict_key': 'x-application-key', 'dict_value': '5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX'}
2021-10-10 17:59:39,494 api_test.py[line:219]INFO - headers:$config_x-application-key$will be replaced to 5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX
2021-10-10 17:59:39,494 api_test.py[line:224]INFO - 有前置条件
2021-10-10 17:59:39,494 api_test.py[line:40]INFO - *****findCaseById
2021-10-10 17:59:39,496 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:59:39,496 api_test.py[line:191]INFO - #####start to run case id: 1
2021-10-10 17:59:39,498 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:{'id': 6, 'project': 'KipleCity', 'dict_key': 'x-application-key', 'dict_value': '5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX'}
2021-10-10 17:59:39,498 api_test.py[line:219]INFO - headers:$config_x-application-key$will be replaced to 5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX
2021-10-10 17:59:39,498 api_test.py[line:255]INFO - case id = 1
req_url = https://k8s-stg-api.kiplelive.com/admin/sessionv2
 method = post
 header = {'x-application-key': '5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX'}
 param ={'identifier': 'demo@dhome.io', 'challenge': 'w3aredeVTEam2019~~~'}
2021-10-10 17:59:39,498 request_util.py[line:16]INFO - 请求: url=https://k8s-stg-api.kiplelive.com/admin/sessionv2
method=post
headers={'x-application-key': '5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX'}
param={'identifier': 'demo@dhome.io', 'challenge': 'w3aredeVTEam2019~~~'}
content_type=application/json
2021-10-10 17:59:41,304 api_test.py[line:262]INFO - response = ↓
2021-10-10 17:59:41,304 api_test.py[line:263]INFO - {'success': True, 'session_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1dWlkIjoiMTNjMzJlZTEtZjIyZS00ZGQ5LTgxN2ItNjk3M2YzMTFhNGIzIiwibmFtZSI6IkRlc21vbmQgVW5kZXJ3b29kIiwiZW1haWwiOiJkZW1vQGRob21lLmlvIiwib2ZmaWNlX2VtYWlsIjpudWxsLCJwaG9uZV9jb3VudHJ5X2NvZGUiOiI2MCIsInBob25lIjoiNjAxMjAwMDExMTEiLCJhbHRfY291bnRyeV9jb2RlIjpudWxsLCJvZmZpY2VfcGhvbmUiOm51bGwsInBob3RvX3VybCI6Imh0dHBzOi8vczMtYXAtc291dGhlYXN0LTEuYW1hem9uYXdzLmNvbS9mbGlwYm94c2VjdXJlLWRob21lL3Byb2ZpbGVzL3Byb2ZpbGVfMTNjMzJlZTEtZjIyZS00ZGQ5LTgxN2ItNjk3M2YzMTFhNGIzXzEzM2FjMWM4MGNkMzRjOWJiMDUxZWRmODg1NGEwZTZkLmpwZyIsImNyZWF0ZWRfYXQiOiIyMDE3LTA2LTE5IDEzOjU4OjAzIiwidXBkYXRlZF9hdCI6IjIwMTgtMDktMDYgMDg6MjI6NTciLCJwaG90byI6ImMyYWE3N2JjLTM2MTctNDZmMi04NWVhLWI1Y2Y2YmJjYTYwNyIsImRlbGV0ZWRfYXQiOm51bGwsImZpcnN0X2xvZ2luX2F0IjoiMjAxOC0wOC0wMyAxNzo0NzowMSIsIm9sZF9waG9uZSI6bnVsbCwiaXNfZ3JvdXBfYWRtaW4iOmZhbHNlLCJpc19kZW1vX2FjY291bnQiOmZhbHNlLCJxcl9jb2RlIjpudWxsLCJxcmNvZGVfZXhwaXJlZF9hdCI6bnVsbCwicXJjb2RlX3VwZGF0ZWRfYXQiOm51bGwsInVzZXJfcHJvZmlsZV9pZCI6NTA3LCJzaG91bGRfbWlncmF0ZSI6IjAwMCIsInVtc190b2tlbl9zdGF0dXMiOiIwMDAiLCJtaWdyYXRpb25fc3RhdHVzIjoiMDAwIiwibWlncmF0ZWRfcGhvbmUiOm51bGwsImtiX3Rva2VuIjpudWxsLCJrYl9yZWZyZXNoX3Rva2VuIjpudWxsLCJrYnRva2VuX2V4cGlyZWRfYXRfbG9jYWx0aW1lIjpudWxsLCJpZGVudGl0aWVzIjpbeyJ1dWlkIjoiMGYzYzQyMDUtZGZmYS00ZjU1LTkzZDUtYzk4NWViYWFjNGEyIiwidHlwZSI6InVzZXJwYXNzIiwicHJvdmlkZXIiOiJhY2NvdW50cy5kaG9tZS5pbyIsInZlcmlmaWVkIjp0cnVlLCJpc19zZWxmX3JlZ2lzdGVyIjpmYWxzZSwiaWRlbnRpZmllciI6ImRlditkaG9tZTEzQGFwcGxhYi5teSIsIm9mZmljZV9pZGVudGlmaWVyIjpudWxsLCJyZXNldF9jb2RlIjpudWxsLCJhY3RpdmF0aW9uX2NvZGUiOiI3NTk1ZGFlOWNkZTgyMjE4MzM2YTU0NTdlZDlkNTVlYzg5OGM1MTYyM2Y3M2E2OWVlZmFhNTdhMmNjOTE5NGZjIiwiaXNfYWN0aXZhdGVkIjpmYWxzZSwiY3JlYXRlZF9hdCI6IjIwMTktMDItMTkgMDI6NTM6MDciLCJ1cGRhdGVkX2F0IjpudWxsLCJwaG9uZSI6bnVsbCwiZGVsZXRlZF9hdCI6bnVsbCwidXNlcl90eXBlIjoibmV3Iiwib2xkX3Bob25lIjpudWxsfSx7InV1aWQiOiI3ZmI1Y2IzNi1hNmExLTExZTgtOThkMC01MjkyNjlmYjE0NTkiLCJ0eXBlIjoidXNlcnBhc3MiLCJwcm92aWRlciI6ImFjY291bnRzLmRob21lLmlvIiwidmVyaWZpZWQiOnRydWUsImlzX3NlbGZfcmVnaXN0ZXIiOmZhbHNlLCJpZGVudGlmaWVyIjoiZGVtb0BkaG9tZS5pbyIsIm9mZmljZV9pZGVudGlmaWVyIjpudWxsLCJyZXNldF9jb2RlIjpudWxsLCJhY3RpdmF0aW9uX2NvZGUiOm51bGwsImlzX2FjdGl2YXRlZCI6dHJ1ZSwiY3JlYXRlZF9hdCI6IjIwMTgtMDgtMjMgMDY6NTY6NDUiLCJ1cGRhdGVkX2F0IjpudWxsLCJwaG9uZSI6bnVsbCwiZGVsZXRlZF9hdCI6bnVsbCwidXNlcl90eXBlIjoib2xkIiwib2xkX3Bob25lIjpudWxsfV0sInJvbGVzIjpbeyJ0eXBlIjoic3VwZXJhZG1pbiIsInJlc2lkZW5jZV91dWlkIjoiOTMwMjA3YjAtYmYxMC00MGJmLWE5ZTItMGIyOGJmZWNiZTFjIiwiY2FuX21hbmFnZV9yZXNpZGVuY2UiOm51bGx9XSwiaWF0IjoxNjMzODU5OTgxLCJpc3MiOiJhY2NvdW50cy5kaG9tZS5pbyJ9._XRTN00M0_KPSvZVasYrQsgSrPF2aPypeeqKwmkhSnQ', 'profile': {'uuid': '13c32ee1-f22e-4dd9-817b-6973f311a4b3', 'name': 'Desmond Underwood', 'email': 'demo@dhome.io', 'office_email': None, 'phone_country_code': '60', 'phone': '60120001111', 'alt_country_code': None, 'office_phone': None, 'photo_url': 'https://s3-ap-southeast-1.amazonaws.com/flipboxsecure-dhome/profiles/profile_13c32ee1-f22e-4dd9-817b-6973f311a4b3_133ac1c80cd34c9bb051edf8854a0e6d.jpg', 'created_at': '2017-06-19 13:58:03', 'updated_at': '2018-09-06 08:22:57', 'photo': 'c2aa77bc-3617-46f2-85ea-b5cf6bbca607', 'deleted_at': None, 'first_login_at': '2018-08-03 17:47:01', 'old_phone': None, 'is_group_admin': False, 'is_demo_account': False, 'qr_code': None, 'qrcode_expired_at': None, 'qrcode_updated_at': None, 'user_profile_id': 507, 'should_migrate': '000', 'ums_token_status': '000', 'migration_status': '000', 'migrated_phone': None, 'kb_token': None, 'kb_refresh_token': None, 'kbtoken_expired_at_localtime': None, 'roles': [{'type': 'superadmin', 'residence_uuid': '930207b0-bf10-40bf-a9e2-0b28bfecbe1c', 'can_manage_residence': None}]}, 'identities': [{'uuid': '0f3c4205-dffa-4f55-93d5-c985ebaac4a2', 'type': 'userpass', 'provider': 'accounts.dhome.io', 'verified': True, 'is_self_register': False, 'identifier': 'dev+dhome13@applab.my', 'office_identifier': None, 'reset_code': None, 'activation_code': '7595dae9cde82218336a5457ed9d55ec898c51623f73a69eefaa57a2cc9194fc', 'is_activated': False, 'created_at': '2019-02-19 02:53:07', 'updated_at': None, 'phone': None, 'deleted_at': None, 'user_type': 'new', 'old_phone': None}, {'uuid': '7fb5cb36-a6a1-11e8-98d0-529269fb1459', 'type': 'userpass', 'provider': 'accounts.dhome.io', 'verified': True, 'is_self_register': False, 'identifier': 'demo@dhome.io', 'office_identifier': None, 'reset_code': None, 'activation_code': None, 'is_activated': True, 'created_at': '2018-08-23 06:56:45', 'updated_at': None, 'phone': None, 'deleted_at': None, 'user_type': 'old', 'old_phone': None}]}
2021-10-10 17:59:41,318 api_test.py[line:264]INFO - #####end to run case id: 1
2021-10-10 17:59:41,318 api_test.py[line:274]INFO - *****assertResponse
2021-10-10 17:59:41,318 api_test.py[line:288]INFO - 测试用例不通过
2021-10-10 17:59:41,318 api_test.py[line:152]INFO - 用例id=2,标题:add car,执行报错:'msg'
2021-10-10 17:59:41,318 api_test.py[line:70]INFO - *****updateResultByCaseId
2021-10-10 17:59:41,334 api_test.py[line:76]INFO - update `KipleCity_testcases` set response="", pass='Fail', msg='msg', update_time='2021-10-10 17:59:41' where id=2
2021-10-10 17:59:41,339 api_test.py[line:154]INFO - 更新结果 rows=1
2021-10-10 17:59:41,339 api_test.py[line:116]INFO - *****checkFailCase
2021-10-10 17:59:41,353 api_test.py[line:177]INFO - ########rerun fail test cases#######
2021-10-10 17:59:41,353 api_test.py[line:135]INFO - *****runCaseUpdateDB
2021-10-10 17:59:41,353 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:59:41,353 api_test.py[line:191]INFO - #####start to run case id: 1
2021-10-10 17:59:41,367 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:{'id': 6, 'project': 'KipleCity', 'dict_key': 'x-application-key', 'dict_value': '5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX'}
2021-10-10 17:59:41,367 api_test.py[line:219]INFO - headers:$config_x-application-key$will be replaced to 5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX
2021-10-10 17:59:41,367 api_test.py[line:255]INFO - case id = 1
req_url = https://k8s-stg-api.kiplelive.com/admin/sessionv2
 method = post
 header = {'x-application-key': '5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX'}
 param ={'identifier': 'demo@dhome.io', 'challenge': 'w3aredeVTEam2019~~~'}
2021-10-10 17:59:41,368 request_util.py[line:16]INFO - 请求: url=https://k8s-stg-api.kiplelive.com/admin/sessionv2
method=post
headers={'x-application-key': '5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX'}
param={'identifier': 'demo@dhome.io', 'challenge': 'w3aredeVTEam2019~~~'}
content_type=application/json
2021-10-10 17:59:42,079 api_test.py[line:262]INFO - response = ↓
2021-10-10 17:59:42,079 api_test.py[line:263]INFO - {'success': True, 'session_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1dWlkIjoiMTNjMzJlZTEtZjIyZS00ZGQ5LTgxN2ItNjk3M2YzMTFhNGIzIiwibmFtZSI6IkRlc21vbmQgVW5kZXJ3b29kIiwiZW1haWwiOiJkZW1vQGRob21lLmlvIiwib2ZmaWNlX2VtYWlsIjpudWxsLCJwaG9uZV9jb3VudHJ5X2NvZGUiOiI2MCIsInBob25lIjoiNjAxMjAwMDExMTEiLCJhbHRfY291bnRyeV9jb2RlIjpudWxsLCJvZmZpY2VfcGhvbmUiOm51bGwsInBob3RvX3VybCI6Imh0dHBzOi8vczMtYXAtc291dGhlYXN0LTEuYW1hem9uYXdzLmNvbS9mbGlwYm94c2VjdXJlLWRob21lL3Byb2ZpbGVzL3Byb2ZpbGVfMTNjMzJlZTEtZjIyZS00ZGQ5LTgxN2ItNjk3M2YzMTFhNGIzXzEzM2FjMWM4MGNkMzRjOWJiMDUxZWRmODg1NGEwZTZkLmpwZyIsImNyZWF0ZWRfYXQiOiIyMDE3LTA2LTE5IDEzOjU4OjAzIiwidXBkYXRlZF9hdCI6IjIwMTgtMDktMDYgMDg6MjI6NTciLCJwaG90byI6ImMyYWE3N2JjLTM2MTctNDZmMi04NWVhLWI1Y2Y2YmJjYTYwNyIsImRlbGV0ZWRfYXQiOm51bGwsImZpcnN0X2xvZ2luX2F0IjoiMjAxOC0wOC0wMyAxNzo0NzowMSIsIm9sZF9waG9uZSI6bnVsbCwiaXNfZ3JvdXBfYWRtaW4iOmZhbHNlLCJpc19kZW1vX2FjY291bnQiOmZhbHNlLCJxcl9jb2RlIjpudWxsLCJxcmNvZGVfZXhwaXJlZF9hdCI6bnVsbCwicXJjb2RlX3VwZGF0ZWRfYXQiOm51bGwsInVzZXJfcHJvZmlsZV9pZCI6NTA3LCJzaG91bGRfbWlncmF0ZSI6IjAwMCIsInVtc190b2tlbl9zdGF0dXMiOiIwMDAiLCJtaWdyYXRpb25fc3RhdHVzIjoiMDAwIiwibWlncmF0ZWRfcGhvbmUiOm51bGwsImtiX3Rva2VuIjpudWxsLCJrYl9yZWZyZXNoX3Rva2VuIjpudWxsLCJrYnRva2VuX2V4cGlyZWRfYXRfbG9jYWx0aW1lIjpudWxsLCJpZGVudGl0aWVzIjpbeyJ1dWlkIjoiMGYzYzQyMDUtZGZmYS00ZjU1LTkzZDUtYzk4NWViYWFjNGEyIiwidHlwZSI6InVzZXJwYXNzIiwicHJvdmlkZXIiOiJhY2NvdW50cy5kaG9tZS5pbyIsInZlcmlmaWVkIjp0cnVlLCJpc19zZWxmX3JlZ2lzdGVyIjpmYWxzZSwiaWRlbnRpZmllciI6ImRlditkaG9tZTEzQGFwcGxhYi5teSIsIm9mZmljZV9pZGVudGlmaWVyIjpudWxsLCJyZXNldF9jb2RlIjpudWxsLCJhY3RpdmF0aW9uX2NvZGUiOiI3NTk1ZGFlOWNkZTgyMjE4MzM2YTU0NTdlZDlkNTVlYzg5OGM1MTYyM2Y3M2E2OWVlZmFhNTdhMmNjOTE5NGZjIiwiaXNfYWN0aXZhdGVkIjpmYWxzZSwiY3JlYXRlZF9hdCI6IjIwMTktMDItMTkgMDI6NTM6MDciLCJ1cGRhdGVkX2F0IjpudWxsLCJwaG9uZSI6bnVsbCwiZGVsZXRlZF9hdCI6bnVsbCwidXNlcl90eXBlIjoibmV3Iiwib2xkX3Bob25lIjpudWxsfSx7InV1aWQiOiI3ZmI1Y2IzNi1hNmExLTExZTgtOThkMC01MjkyNjlmYjE0NTkiLCJ0eXBlIjoidXNlcnBhc3MiLCJwcm92aWRlciI6ImFjY291bnRzLmRob21lLmlvIiwidmVyaWZpZWQiOnRydWUsImlzX3NlbGZfcmVnaXN0ZXIiOmZhbHNlLCJpZGVudGlmaWVyIjoiZGVtb0BkaG9tZS5pbyIsIm9mZmljZV9pZGVudGlmaWVyIjpudWxsLCJyZXNldF9jb2RlIjpudWxsLCJhY3RpdmF0aW9uX2NvZGUiOm51bGwsImlzX2FjdGl2YXRlZCI6dHJ1ZSwiY3JlYXRlZF9hdCI6IjIwMTgtMDgtMjMgMDY6NTY6NDUiLCJ1cGRhdGVkX2F0IjpudWxsLCJwaG9uZSI6bnVsbCwiZGVsZXRlZF9hdCI6bnVsbCwidXNlcl90eXBlIjoib2xkIiwib2xkX3Bob25lIjpudWxsfV0sInJvbGVzIjpbeyJ0eXBlIjoic3VwZXJhZG1pbiIsInJlc2lkZW5jZV91dWlkIjoiOTMwMjA3YjAtYmYxMC00MGJmLWE5ZTItMGIyOGJmZWNiZTFjIiwiY2FuX21hbmFnZV9yZXNpZGVuY2UiOm51bGx9XSwiaWF0IjoxNjMzODU5OTgyLCJpc3MiOiJhY2NvdW50cy5kaG9tZS5pbyJ9.xlS5q43-nBp-KGB7aQaU_J03ECgMjMs60KABiURZgeA', 'profile': {'uuid': '13c32ee1-f22e-4dd9-817b-6973f311a4b3', 'name': 'Desmond Underwood', 'email': 'demo@dhome.io', 'office_email': None, 'phone_country_code': '60', 'phone': '60120001111', 'alt_country_code': None, 'office_phone': None, 'photo_url': 'https://s3-ap-southeast-1.amazonaws.com/flipboxsecure-dhome/profiles/profile_13c32ee1-f22e-4dd9-817b-6973f311a4b3_133ac1c80cd34c9bb051edf8854a0e6d.jpg', 'created_at': '2017-06-19 13:58:03', 'updated_at': '2018-09-06 08:22:57', 'photo': 'c2aa77bc-3617-46f2-85ea-b5cf6bbca607', 'deleted_at': None, 'first_login_at': '2018-08-03 17:47:01', 'old_phone': None, 'is_group_admin': False, 'is_demo_account': False, 'qr_code': None, 'qrcode_expired_at': None, 'qrcode_updated_at': None, 'user_profile_id': 507, 'should_migrate': '000', 'ums_token_status': '000', 'migration_status': '000', 'migrated_phone': None, 'kb_token': None, 'kb_refresh_token': None, 'kbtoken_expired_at_localtime': None, 'roles': [{'type': 'superadmin', 'residence_uuid': '930207b0-bf10-40bf-a9e2-0b28bfecbe1c', 'can_manage_residence': None}]}, 'identities': [{'uuid': '0f3c4205-dffa-4f55-93d5-c985ebaac4a2', 'type': 'userpass', 'provider': 'accounts.dhome.io', 'verified': True, 'is_self_register': False, 'identifier': 'dev+dhome13@applab.my', 'office_identifier': None, 'reset_code': None, 'activation_code': '7595dae9cde82218336a5457ed9d55ec898c51623f73a69eefaa57a2cc9194fc', 'is_activated': False, 'created_at': '2019-02-19 02:53:07', 'updated_at': None, 'phone': None, 'deleted_at': None, 'user_type': 'new', 'old_phone': None}, {'uuid': '7fb5cb36-a6a1-11e8-98d0-529269fb1459', 'type': 'userpass', 'provider': 'accounts.dhome.io', 'verified': True, 'is_self_register': False, 'identifier': 'demo@dhome.io', 'office_identifier': None, 'reset_code': None, 'activation_code': None, 'is_activated': True, 'created_at': '2018-08-23 06:56:45', 'updated_at': None, 'phone': None, 'deleted_at': None, 'user_type': 'old', 'old_phone': None}]}
2021-10-10 17:59:42,093 api_test.py[line:264]INFO - #####end to run case id: 1
2021-10-10 17:59:42,093 api_test.py[line:274]INFO - *****assertResponse
2021-10-10 17:59:42,093 api_test.py[line:288]INFO - 测试用例不通过
2021-10-10 17:59:42,093 api_test.py[line:152]INFO - 用例id=1,标题:login,执行报错:'msg'
2021-10-10 17:59:42,093 api_test.py[line:70]INFO - *****updateResultByCaseId
2021-10-10 17:59:42,110 api_test.py[line:76]INFO - update `KipleCity_testcases` set response="", pass='Fail', msg='msg', update_time='2021-10-10 17:59:42' where id=1
2021-10-10 17:59:42,113 api_test.py[line:154]INFO - 更新结果 rows=1
2021-10-10 17:59:42,113 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:59:42,113 api_test.py[line:191]INFO - #####start to run case id: 2
2021-10-10 17:59:42,126 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:{'id': 6, 'project': 'KipleCity', 'dict_key': 'x-application-key', 'dict_value': '5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX'}
2021-10-10 17:59:42,126 api_test.py[line:219]INFO - headers:$config_x-application-key$will be replaced to 5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX
2021-10-10 17:59:42,127 api_test.py[line:224]INFO - 有前置条件
2021-10-10 17:59:42,127 api_test.py[line:40]INFO - *****findCaseById
2021-10-10 17:59:42,141 api_test.py[line:190]INFO - *****runCase
2021-10-10 17:59:42,141 api_test.py[line:191]INFO - #####start to run case id: 1
2021-10-10 17:59:42,158 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:{'id': 6, 'project': 'KipleCity', 'dict_key': 'x-application-key', 'dict_value': '5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX'}
2021-10-10 17:59:42,158 api_test.py[line:219]INFO - headers:$config_x-application-key$will be replaced to 5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX
2021-10-10 17:59:42,158 api_test.py[line:255]INFO - case id = 1
req_url = https://k8s-stg-api.kiplelive.com/admin/sessionv2
 method = post
 header = {'x-application-key': '5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX'}
 param ={'identifier': 'demo@dhome.io', 'challenge': 'w3aredeVTEam2019~~~'}
2021-10-10 17:59:42,159 request_util.py[line:16]INFO - 请求: url=https://k8s-stg-api.kiplelive.com/admin/sessionv2
method=post
headers={'x-application-key': '5Syw49JVgmCDrGv5QBDbxtDvpTR2XxkF36Vr4EMVkvDVecJX'}
param={'identifier': 'demo@dhome.io', 'challenge': 'w3aredeVTEam2019~~~'}
content_type=application/json
2021-10-10 17:59:42,827 api_test.py[line:262]INFO - response = ↓
2021-10-10 17:59:42,827 api_test.py[line:263]INFO - {'success': True, 'session_token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1dWlkIjoiMTNjMzJlZTEtZjIyZS00ZGQ5LTgxN2ItNjk3M2YzMTFhNGIzIiwibmFtZSI6IkRlc21vbmQgVW5kZXJ3b29kIiwiZW1haWwiOiJkZW1vQGRob21lLmlvIiwib2ZmaWNlX2VtYWlsIjpudWxsLCJwaG9uZV9jb3VudHJ5X2NvZGUiOiI2MCIsInBob25lIjoiNjAxMjAwMDExMTEiLCJhbHRfY291bnRyeV9jb2RlIjpudWxsLCJvZmZpY2VfcGhvbmUiOm51bGwsInBob3RvX3VybCI6Imh0dHBzOi8vczMtYXAtc291dGhlYXN0LTEuYW1hem9uYXdzLmNvbS9mbGlwYm94c2VjdXJlLWRob21lL3Byb2ZpbGVzL3Byb2ZpbGVfMTNjMzJlZTEtZjIyZS00ZGQ5LTgxN2ItNjk3M2YzMTFhNGIzXzEzM2FjMWM4MGNkMzRjOWJiMDUxZWRmODg1NGEwZTZkLmpwZyIsImNyZWF0ZWRfYXQiOiIyMDE3LTA2LTE5IDEzOjU4OjAzIiwidXBkYXRlZF9hdCI6IjIwMTgtMDktMDYgMDg6MjI6NTciLCJwaG90byI6ImMyYWE3N2JjLTM2MTctNDZmMi04NWVhLWI1Y2Y2YmJjYTYwNyIsImRlbGV0ZWRfYXQiOm51bGwsImZpcnN0X2xvZ2luX2F0IjoiMjAxOC0wOC0wMyAxNzo0NzowMSIsIm9sZF9waG9uZSI6bnVsbCwiaXNfZ3JvdXBfYWRtaW4iOmZhbHNlLCJpc19kZW1vX2FjY291bnQiOmZhbHNlLCJxcl9jb2RlIjpudWxsLCJxcmNvZGVfZXhwaXJlZF9hdCI6bnVsbCwicXJjb2RlX3VwZGF0ZWRfYXQiOm51bGwsInVzZXJfcHJvZmlsZV9pZCI6NTA3LCJzaG91bGRfbWlncmF0ZSI6IjAwMCIsInVtc190b2tlbl9zdGF0dXMiOiIwMDAiLCJtaWdyYXRpb25fc3RhdHVzIjoiMDAwIiwibWlncmF0ZWRfcGhvbmUiOm51bGwsImtiX3Rva2VuIjpudWxsLCJrYl9yZWZyZXNoX3Rva2VuIjpudWxsLCJrYnRva2VuX2V4cGlyZWRfYXRfbG9jYWx0aW1lIjpudWxsLCJpZGVudGl0aWVzIjpbeyJ1dWlkIjoiMGYzYzQyMDUtZGZmYS00ZjU1LTkzZDUtYzk4NWViYWFjNGEyIiwidHlwZSI6InVzZXJwYXNzIiwicHJvdmlkZXIiOiJhY2NvdW50cy5kaG9tZS5pbyIsInZlcmlmaWVkIjp0cnVlLCJpc19zZWxmX3JlZ2lzdGVyIjpmYWxzZSwiaWRlbnRpZmllciI6ImRlditkaG9tZTEzQGFwcGxhYi5teSIsIm9mZmljZV9pZGVudGlmaWVyIjpudWxsLCJyZXNldF9jb2RlIjpudWxsLCJhY3RpdmF0aW9uX2NvZGUiOiI3NTk1ZGFlOWNkZTgyMjE4MzM2YTU0NTdlZDlkNTVlYzg5OGM1MTYyM2Y3M2E2OWVlZmFhNTdhMmNjOTE5NGZjIiwiaXNfYWN0aXZhdGVkIjpmYWxzZSwiY3JlYXRlZF9hdCI6IjIwMTktMDItMTkgMDI6NTM6MDciLCJ1cGRhdGVkX2F0IjpudWxsLCJwaG9uZSI6bnVsbCwiZGVsZXRlZF9hdCI6bnVsbCwidXNlcl90eXBlIjoibmV3Iiwib2xkX3Bob25lIjpudWxsfSx7InV1aWQiOiI3ZmI1Y2IzNi1hNmExLTExZTgtOThkMC01MjkyNjlmYjE0NTkiLCJ0eXBlIjoidXNlcnBhc3MiLCJwcm92aWRlciI6ImFjY291bnRzLmRob21lLmlvIiwidmVyaWZpZWQiOnRydWUsImlzX3NlbGZfcmVnaXN0ZXIiOmZhbHNlLCJpZGVudGlmaWVyIjoiZGVtb0BkaG9tZS5pbyIsIm9mZmljZV9pZGVudGlmaWVyIjpudWxsLCJyZXNldF9jb2RlIjpudWxsLCJhY3RpdmF0aW9uX2NvZGUiOm51bGwsImlzX2FjdGl2YXRlZCI6dHJ1ZSwiY3JlYXRlZF9hdCI6IjIwMTgtMDgtMjMgMDY6NTY6NDUiLCJ1cGRhdGVkX2F0IjpudWxsLCJwaG9uZSI6bnVsbCwiZGVsZXRlZF9hdCI6bnVsbCwidXNlcl90eXBlIjoib2xkIiwib2xkX3Bob25lIjpudWxsfV0sInJvbGVzIjpbeyJ0eXBlIjoic3VwZXJhZG1pbiIsInJlc2lkZW5jZV91dWlkIjoiOTMwMjA3YjAtYmYxMC00MGJmLWE5ZTItMGIyOGJmZWNiZTFjIiwiY2FuX21hbmFnZV9yZXNpZGVuY2UiOm51bGx9XSwiaWF0IjoxNjMzODU5OTgzLCJpc3MiOiJhY2NvdW50cy5kaG9tZS5pbyJ9.C-CQyxfZImLdB8AkE28ACtG9qDJbYQ4uAgvd6qaF-bM', 'profile': {'uuid': '13c32ee1-f22e-4dd9-817b-6973f311a4b3', 'name': 'Desmond Underwood', 'email': 'demo@dhome.io', 'office_email': None, 'phone_country_code': '60', 'phone': '60120001111', 'alt_country_code': None, 'office_phone': None, 'photo_url': 'https://s3-ap-southeast-1.amazonaws.com/flipboxsecure-dhome/profiles/profile_13c32ee1-f22e-4dd9-817b-6973f311a4b3_133ac1c80cd34c9bb051edf8854a0e6d.jpg', 'created_at': '2017-06-19 13:58:03', 'updated_at': '2018-09-06 08:22:57', 'photo': 'c2aa77bc-3617-46f2-85ea-b5cf6bbca607', 'deleted_at': None, 'first_login_at': '2018-08-03 17:47:01', 'old_phone': None, 'is_group_admin': False, 'is_demo_account': False, 'qr_code': None, 'qrcode_expired_at': None, 'qrcode_updated_at': None, 'user_profile_id': 507, 'should_migrate': '000', 'ums_token_status': '000', 'migration_status': '000', 'migrated_phone': None, 'kb_token': None, 'kb_refresh_token': None, 'kbtoken_expired_at_localtime': None, 'roles': [{'type': 'superadmin', 'residence_uuid': '930207b0-bf10-40bf-a9e2-0b28bfecbe1c', 'can_manage_residence': None}]}, 'identities': [{'uuid': '0f3c4205-dffa-4f55-93d5-c985ebaac4a2', 'type': 'userpass', 'provider': 'accounts.dhome.io', 'verified': True, 'is_self_register': False, 'identifier': 'dev+dhome13@applab.my', 'office_identifier': None, 'reset_code': None, 'activation_code': '7595dae9cde82218336a5457ed9d55ec898c51623f73a69eefaa57a2cc9194fc', 'is_activated': False, 'created_at': '2019-02-19 02:53:07', 'updated_at': None, 'phone': None, 'deleted_at': None, 'user_type': 'new', 'old_phone': None}, {'uuid': '7fb5cb36-a6a1-11e8-98d0-529269fb1459', 'type': 'userpass', 'provider': 'accounts.dhome.io', 'verified': True, 'is_self_register': False, 'identifier': 'demo@dhome.io', 'office_identifier': None, 'reset_code': None, 'activation_code': None, 'is_activated': True, 'created_at': '2018-08-23 06:56:45', 'updated_at': None, 'phone': None, 'deleted_at': None, 'user_type': 'old', 'old_phone': None}]}
2021-10-10 17:59:42,835 api_test.py[line:264]INFO - #####end to run case id: 1
2021-10-10 17:59:42,835 api_test.py[line:274]INFO - *****assertResponse
2021-10-10 17:59:42,835 api_test.py[line:288]INFO - 测试用例不通过
2021-10-10 17:59:42,835 api_test.py[line:152]INFO - 用例id=2,标题:add car,执行报错:'msg'
2021-10-10 17:59:42,835 api_test.py[line:70]INFO - *****updateResultByCaseId
2021-10-10 17:59:42,851 api_test.py[line:76]INFO - update `KipleCity_testcases` set response="", pass='Fail', msg='msg', update_time='2021-10-10 17:59:42' where id=2
2021-10-10 17:59:42,856 api_test.py[line:154]INFO - 更新结果 rows=1
2021-10-10 17:59:42,856 api_test.py[line:370]INFO - *****sendTestReport
2021-10-10 17:59:42,883 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:{'id': 2, 'project': 'KipleCity', 'dict_key': 'mail_host', 'dict_value': 'smtp.qq.com'}
2021-10-10 17:59:42,900 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:{'id': 3, 'project': 'KipleCity', 'dict_key': 'mail_sender', 'dict_value': 'brsbyjw@qq.com'}
2021-10-10 17:59:42,902 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:{'id': 5, 'project': 'KipleCity', 'dict_key': 'mail_password', 'dict_value': 'luesrdnzkwxrbdbh'}
2021-10-10 17:59:42,915 api_test.py[line:58]INFO - loadConfigByProjectAndKey mysql result is:{'id': 4, 'project': 'KipleCity', 'dict_key': 'mail_receivers', 'dict_value': '1226682240@qq.com'}
2021-10-10 17:59:42,915 api_test.py[line:319]INFO - *****loadHtmlPre
2021-10-10 17:59:42,916 api_test.py[line:341]INFO - *****getResultData
2021-10-10 17:59:42,916 api_test.py[line:26]INFO - *****loadAllCaseByProject
2021-10-10 17:59:42,929 api_test.py[line:29]INFO - loadAllCaseByProject sql is:select * from `KipleCity_testcases` where project='KipleCity' and run='yes'
2021-10-10 17:59:42,930 api_test.py[line:31]INFO - loadAllCaseByProject is:[{'id': 1, 'project': 'KipleCity', 'module': 'Login', 'title': 'login', 'method': 'post', 'url': '/admin/sessionv2', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$"}', 'pre_case_id': -1, 'pre_fields': '[]', 'request_body': '{"identifier":"demo@dhome.io","challenge":"w3aredeVTEam2019~~~"}', 'expect_result': 'true', 'assert_type': 'code', 'pass': 'Fail', 'msg': 'msg', 'update_time': '2021-10-10 17:59:42', 'response': '', 'qa': None}, {'id': 2, 'project': 'KipleCity', 'module': 'Car', 'title': 'add car', 'method': 'post', 'url': '/lpr/add', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$","authorization":"Bearer $session_token$"}', 'pre_case_id': 1, 'pre_fields': '[{"field":"session_token","scope":"header"}]', 'request_body': '{"carPlateNumbers":[{"uuid":"f4dfdc7b-a68e-4d28-b1fb-52d26b8000ec","active_flag":true,"valid_type":0,"car_plate_no":"HJ898791","is_edit":true,"max_car_park_bay":1,"residence_uuid":"b5e27596-af09-4025-8164-38750e586481","unit_uuid":"94408056-736e-4dc3-bf98-f0deb9567197","is_from_portal":true}]}', 'expect_result': 'true', 'assert_type': 'code', 'pass': 'Fail', 'msg': 'msg', 'update_time': '2021-10-10 17:59:42', 'response': '', 'qa': 'Doris'}]
2021-10-10 17:59:42,931 api_test.py[line:99]INFO - *****caseRunSummary
2021-10-10 17:59:42,946 api_test.py[line:26]INFO - *****loadAllCaseByProject
2021-10-10 17:59:42,961 api_test.py[line:29]INFO - loadAllCaseByProject sql is:select * from `KipleCity_testcases` where project='KipleCity' and run='yes'
2021-10-10 17:59:42,962 api_test.py[line:31]INFO - loadAllCaseByProject is:[{'id': 1, 'project': 'KipleCity', 'module': 'Login', 'title': 'login', 'method': 'post', 'url': '/admin/sessionv2', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$"}', 'pre_case_id': -1, 'pre_fields': '[]', 'request_body': '{"identifier":"demo@dhome.io","challenge":"w3aredeVTEam2019~~~"}', 'expect_result': 'true', 'assert_type': 'code', 'pass': 'Fail', 'msg': 'msg', 'update_time': '2021-10-10 17:59:42', 'response': '', 'qa': None}, {'id': 2, 'project': 'KipleCity', 'module': 'Car', 'title': 'add car', 'method': 'post', 'url': '/lpr/add', 'run': 'yes', 'headers': '{"x-application-key":"$config_x-application-key$","authorization":"Bearer $session_token$"}', 'pre_case_id': 1, 'pre_fields': '[{"field":"session_token","scope":"header"}]', 'request_body': '{"carPlateNumbers":[{"uuid":"f4dfdc7b-a68e-4d28-b1fb-52d26b8000ec","active_flag":true,"valid_type":0,"car_plate_no":"HJ898791","is_edit":true,"max_car_park_bay":1,"residence_uuid":"b5e27596-af09-4025-8164-38750e586481","unit_uuid":"94408056-736e-4dc3-bf98-f0deb9567197","is_from_portal":true}]}', 'expect_result': 'true', 'assert_type': 'code', 'pass': 'Fail', 'msg': 'msg', 'update_time': '2021-10-10 17:59:42', 'response': '', 'qa': 'Doris'}]
2021-10-10 17:59:42,963 api_test.py[line:329]INFO - *****loadHtmlEnd
2021-10-10 17:59:42,965 send_mail.py[line:16]INFO - title = KipleCity API automation test report report = ../report/KipleCity/test_report_2021-10-10_17_59_42.html mail_host = smtp.qq.com mail_sender = brsbyjw@qq.com mail_receivers = ['1226682240@qq.com'] mail_password = luesrdnzkwxrbdbh
2021-10-10 17:59:44,279 send_mail.py[line:45]INFO - email was sent successfully!
2021-10-10 17:59:44,327 api_test.py[line:181]INFO - ########complete to run API automation#######
